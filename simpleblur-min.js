(function(u){function m(a,d){console.log(d);var e=d.blurring_average||4,c=d.blurring_iterations||3,f=d.scaledown_percentage||.1,b,l="blurImage"+a.src+a.offsetWidth+e+c+f;if(n.storageAvailable){var g=localStorage.getItem(l);"undefined"!==typeof g&&null!==g&&(b=g)}if("undefined"===typeof b){b=document.createElement("canvas");g=a.offsetHeight;b.setAttribute("width",a.offsetWidth*f+"px");b.setAttribute("height",g*f+"px");b.crossOrigin="Anonymous";f=b.getContext("2d");f.drawImage(a,0,0,b.width,b.height);
for(var g=f.getImageData(0,0,b.width,b.height),k=g.data,p=b.width,m=0;m<c;m++)for(var h=0;h<k.length;h+=4)k[h]=q(h,k,p,e),k[h+1]=q(h+1,k,p,e),k[h+2]=q(h+2,k,p,e);f.putImageData(g,0,0);b=b.toDataURL("image/png");n.storageAvailable&&localStorage.setItem(l,b)}a.src=b}function q(a,d,e,c){for(var f=-Math.floor(c/2),b=0,l=f;l<c+f;l++)for(var g=f;g<c+f;g++)b+=d[a+4*l*e+4*g]||d[a];return b/(c*c)}function r(a,d){if(t(a))m(a,d);else var e=0,c=setInterval(function(){t(a)?(clearInterval(c),m(a,d)):(e++,3<e&&
clearInterval(c))},25*e)}function t(a){return!a.complete||"undefined"!=typeof a.naturalWidth&&0==a.naturalWidth?!1:!0}var n={};u.simpleblur=function(a,d){n.storageAvailable="undefined"!==typeof Storage?!0:!1;for(var e=document.querySelectorAll(a||"#simpleBlurTarget"),c=0;c<e.length;c++)r(e[c],d)};"undefined"!==typeof jQuery&&(jQuery.fn.simpleblur=function(a){n.storageAvailable="undefined"!==typeof Storage?!0:!1;return this.each(function(d){r(this,a)})})})(window);
