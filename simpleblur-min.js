(function(t){function m(a,b,f){console.log("Main");var d=b.blurring_average||4,e=b.blurring_iterations||3,g=b.scaledown_percentage||.1,c;b="blurImage"+a.src+a.offsetWidth+d+e+g;if(p.storageAvailable){var h=localStorage.getItem(b);"undefined"!==typeof h&&null!==h&&(c=h)}if("undefined"===typeof c){c=document.createElement("canvas");if("undefined"!==typeof f)var h=f.offsetWidth,k=f.offsetHeight;else h=a.offsetWidth,k=a.offsetHeight;c.setAttribute("width",h*g+"px");c.setAttribute("height",k*g+"px");c.crossOrigin=
"Anonymous";g=c.getContext("2d");g.drawImage(a,0,0,c.width,c.height);for(var h=g.getImageData(0,0,c.width,c.height),k=h.data,m=c.width,n=0;n<e;n++)for(var l=0;l<k.length;l+=4)k[l]=q(l,k,m,d),k[l+1]=q(l+1,k,m,d),k[l+2]=q(l+2,k,m,d);g.putImageData(h,0,0);c=c.toDataURL("image/png");p.storageAvailable&&localStorage.setItem(b,c)}"undefined"!==typeof f?f.style.backgroundImage="url("+c+")":a.src=c}function q(a,b,f,d){for(var e=-Math.floor(d/2),g=0,c=e;c<d+e;c++)for(var h=e;h<d+e;h++)g+=b[a+4*c*f+4*h]||b[a];
return g/(d*d)}function n(a,b){if(a instanceof HTMLImageElement)if(r(a))m(a,b);else var f=0,d=setInterval(function(){r(a)?(clearInterval(d),m(a,b)):(f++,3<f&&clearInterval(d))},25*f);else{var e=u(a)["background-image"].replace("url(","").slice(0,-2),e=e.replace("&quot;",""),e=e.replace('"',""),g=new Image;g.onload=function(){console.log("hello");m(g,b,a)};g.src=e}}function r(a){return!a.complete||"undefined"!=typeof a.naturalWidth&&0==a.naturalWidth?!1:!0}function u(a){for(var b="width height opacity background-image background-repeat background-position background-color margin-right margin-left margin-top margin-bottom".split(" "),
f={},d="undefined"!==getComputedStyle,e=0,g=b.length;e<g;e++)f[b[e]]=d?getComputedStyle(a,null).getPropertyValue(b[e]):a.currentStyle[b[e]];return f}var p={};t.simpleblur=function(a,b){p.storageAvailable="undefined"!==typeof Storage?!0:!1;for(var f=document.querySelectorAll(a||"#simpleBlurTarget"),d=0;d<f.length;d++)n(f[d],b)};"undefined"!==typeof jQuery&&(jQuery.fn.simpleblur=function(a){p.storageAvailable="undefined"!==typeof Storage?!0:!1;return this.each(function(b){n(this,a)})})})(window);
